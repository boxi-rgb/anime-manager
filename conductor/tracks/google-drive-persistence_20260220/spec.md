# Specification: Google Drive Persistence

**Track ID:** google-drive-persistence_20260220
**Type:** Feature
**Created:** 2026-02-20
**Status:** Draft

## Summary
Google Drive API を使用して、視聴データを JSON ファイルとしてクラウドに保存・同期する機能。ブラウザのクリーンアップによるデータ消失を防ぎ、デバイス間でのデータ共有を実現する。

## Context
現在の `anime-manager` は LocalStorage に依存しており、ブラウザのキャッシュ消去などでデータが完全に消失するリスクがある。これを解決するため、Google ログインを利用したクラウドストレージ連携を導入する。

## User Story
ユーザー（私）として、Google ログインを通じてアニメ視聴データをクラウド（Drive）に同期したい。そうすることで、ブラウザを掃除してもデータが消えず、どの PC からでも最新のリストが見れるようにしたい。

## Acceptance Criteria
- [ ] Google ログイン/ログアウト機能の提供。
- [ ] データの追加・編集・削除が行われた瞬間に、Google Drive 上の `anime_data.json` へ自動同期される。
- [ ] アプリ起動時、最新のデータを Drive から取得して、ローカル表示を更新する。
- [ ] **復旧テスト**: ブラウザの LocalStorage を手動で削除し、再ログインした後にデータが完全に復元されること。

## Dependencies
- Google API Client Library (gapi.js)
- Google Identity Services (gis.js)
- OAuth Client ID (JSON提供済み)
- 既存のデータ構造 (`anime_data.json`)

## Out of Scope
- Google アカウント以外の認証
- データの詳細な履歴/バージョン管理
- 複数ユーザー間での共有/同時編集機能

## Technical Notes
- Vanilla JS 環境を維持するため、`<script>` タグ経由で Google SDK をロードする。
- データの競合を避けるため、「最後に保存されたものが正義」とするシンプルな同期モデルを採用する（個人利用のため）。
- 認証情報はローカル環境でのみ適切に構成し、パブリックリポジトリにコミットしないよう注意する。

---

_Generated by Conductor. Review and edit as needed._
