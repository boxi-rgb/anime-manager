<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>究極のアニメ管理ツール</title>
    <link rel="icon" type="image/svg+xml" href="tv_favicon_noto.svg">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="bg-left" class="bg-side"></div>
    <div id="bg-right" class="bg-side"></div>

    <header>
        <div class="header-top">
            <h1>究極のアニメ管理ツール</h1>
            <div class="status-text" id="loading-status">待機中...</div>
        </div>

        <!-- Season Selector -->
        <div class="season-selector">
            <div class="selector-group">
                <input type="number" id="start-year" class="date-input" value="2025" min="2000" max="2030">
                <select id="start-season" class="season-select">
                    <option value="WINTER">冬 (1-3月)</option>
                    <option value="SPRING">春 (4-6月)</option>
                    <option value="SUMMER">夏 (7-9月)</option>
                    <option value="FALL" selected>秋 (10-12月)</option>
                </select>
            </div>
            <span style="color:#666">〜</span>
            <div class="selector-group">
                <input type="number" id="end-year" class="date-input" value="2026" min="2000" max="2030">
                <select id="end-season" class="season-select">
                    <option value="WINTER" selected>冬 (1-3月)</option>
                    <option value="SPRING">春 (4-6月)</option>
                    <option value="SUMMER">夏 (7-9月)</option>
                    <option value="FALL">秋 (10-12月)</option>
                </select>
            </div>

            <label class="toggle-label" style="margin-left:auto; margin-right:15px;" title="放送中の作品も含める場合はチェック">
                <input type="checkbox" id="include-airing-check">
                放送中も含める
            </label>

            <button class="fetch-btn" onclick="fetchRange()">データ取得</button>
        </div>

        <div class="controls-area">
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <button class="tab-btn active" onclick="setFilter('ALL')" id="tab-ALL">すべて</button>
                <button class="tab-btn" onclick="setFilter('WATCHING')" id="tab-WATCHING">キュー（未消化）</button>
                <button class="tab-btn" onclick="setFilter('WATCHED')" id="tab-WATCHED">視聴済み</button>
                <button class="tab-btn" onclick="setFilter('DROPPED')" id="tab-DROPPED">ゴミ箱</button>
            </div>

            <div class="options-group">
                <!-- Sort -->
                <select id="sort-select" onchange="setSort(this.value)">
                    <option value="POPULARITY_DESC">人気順</option>
                    <option value="SCORE_DESC">スコア順</option>
                    <option value="TITLE_ROMAJI">タイトル順</option>
                </select>

                <!-- Theme Selector -->
                <select id="theme-select" onchange="setTheme(this.value)">
                    <option value="midnight">Midnight (Dark)</option>
                    <option value="snow">Snow (Light)</option>
                    <option value="cyber">Cyber (Neon)</option>
                </select>

                <!-- Backup Controls -->
                <button class="icon-btn" onclick="exportData()" title="視聴データをバックアップ（保存）">⬇ 保存</button>
                <button class="icon-btn" onclick="triggerImport()" title="バックアップから復元">⬆ 復元</button>
                <input type="file" id="backup-file" style="display:none" onchange="importData(this)">

                <!-- Kids Filter -->
                <label class="toggle-label">
                    <input type="checkbox" id="hide-kids-check" onchange="toggleKidsFilter(this.checked)">
                    子供向けを非表示
                </label>

                <!-- Google Auth -->
                <div class="auth-box">
                    <button id="auth-btn" class="icon-btn google-btn" onclick="handleAuthClick()">
                        <span id="auth-icon">🔑</span> <span id="auth-label">Google ログイン</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="list-container" id="anime-list-root">
        <!-- JS Populated -->
    </div>

    <!-- Google Scripts -->
    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>

</html>